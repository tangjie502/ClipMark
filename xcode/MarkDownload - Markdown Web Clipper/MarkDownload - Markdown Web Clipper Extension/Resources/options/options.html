<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClipMark 设置</title>
    <link rel="stylesheet" type="text/css" href="options.css" media="screen">
</head>

<body>
    <div class="options-container">
        <!-- 主卡片容器 -->
        <div class="options-card">
            <!-- 标题栏 -->
            <div class="header">
                <div class="header-content">
                    <div class="header-left">
                        <span class="header-icon">⚙️</span>
                        <h1 class="header-title">ClipMark 设置</h1>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="refreshBtn">🔄 刷新</button>
                        <button class="btn btn-secondary" id="closeBtn">❌ 关闭</button>
                    </div>
                </div>
            </div>

            <!-- 设置内容区域 -->
            <div class="content-area">
    <details>
        <summary>
            <h2>自定义文本 ℹ️</h2>
        </summary>
        <small class="instructions">对于标题以及前后文档自定义文本，您可以使用以下文本替换值。
            请注意，并非所有网站都提供所有值
            <ul>
                <li><code>{title}</code> - 文章标题</li>
                <li><code>{pageTitle}</code> - 实际页面标题</li>
                <li><code>{length}</code> - 文章长度（字符数）</li>
                <li><code>{excerpt}</code> - 文章描述或内容摘要</li>
                <li><code>{byline}</code> - 作者元数据</li>
                <li><code>{dir}</code> - 内容方向</li>
                <li><code>{date:FORMAT}</code> - 当前日期和时间。查看 <a href="https://momentjs.com/docs/#/displaying/format/" target="_blank" rel="noopener noreferrer">格式参考</a> </li>
                <li><code>{keywords}</code> - 元关键词（如果存在）。默认以逗号分隔。</li>
                <li><code>{keywords:SEPARATOR}</code> - 元关键词（如果存在）使用 SEPARATOR 分隔。例如，使用空格分隔，使用 <code>{keywords: }</code></li>
            </ul>
            还支持上述未提及的所有元标签，只要您正在剪藏的页面支持它们。
            例如，尝试 <code>{og:image}</code> 或任何其他广泛支持的元标签
            <p>
                网址信息：
                <ul>
                    <li><code>{baseURI}</code> - 文章的网址</li>
                    <li><code>{origin}</code> - 网址的源，即其协议、域名和端口。</li>
                    <li><code>{host}</code> - 域名（即 <em>主机名</em>），后跟（如果指定了端口）<code>':'</code> 和网址的 <em>端口</em>。</li>
                    <li><code>{hostname}</code> - 网址的域名。</li>
                    <li><code>{port}</code> - 网址的端口号。</li>
                    <li><code>{protocol}</code> - 网址的协议方案，包括最后的 <code>':'</code>。</li>
                    <li><code>{pathname}</code> - 以 <code>'/'</code> 开头，后跟网址的路径，不包括查询字符串或片段。</li>
                    <li><code>{search}</code> - 网址的参数字符串；如果提供了任何参数，该字符串包含所有参数，以 <code>?</code> 字符开头。</li>
                    <li><code>{hash}</code> - 以 '#' 开头，后跟网址的片段标识符。</li>
                </ul>
            </p>
            <p>
                此外，您可以使用以下语法对任何文本变量（除了日期和关键词）进行“参数化”：
                <ul>
                    <li><code>{variable:pascal}</code> - 帕斯卡尔命名：每个单词首字母大写</li>
                    <li><code>{variable:camel}</code> - 驼峰命名：除第一个单词外，每个单词首字母大写</li>
                    <li><code>{variable:kebab}</code> - 烤串命名：单词间用连字符，全部小写</li>
                    <li><code>{variable:snake}</code> - 蛇形命名：单词间用下划线，全部小写</li>
                </ul>
            </p>
        </small>
    </details>

    <h3>标题模板</h3>
    <div class="textbox-container">
        <label for="title">标题/文件名模板</label>
        <input type="text" id="title" name="title" role="textbox" />
    </div>

    <br />

    <div class="textbox-container" id="mdClipsFolder">
                    <label for="mdClipsFolder">在 <code>Downloads/</code> 内存储 ClipMark 剪藏的文件夹：</label>
        <input type="text" name="mdClipsFolder" role="textbox" />
    </div>

    <br />

    <div class="textbox-container">
        <label for="disallowedChars">禁止字符（从标题/文件名中删除——
            除了 <code>/</code>, <code>?</code>, <code>&lt;</code>, <code>&gt;</code>, <code>\</code>,
            <code>:</code>, <code>*</code>, <code>|</code>, <code>"</code> 之外）</label>
        <input type="text" id="disallowedChars" name="disallowedChars" role="textbox" />
    </div>
    
    <h3>前文档模板</h3>
    <div class="textbox-container">
        <label for="frontmatter">在此输入应出现在输出文件顶部的文本。</label> <br />
        <div class="input-sizer"><textarea name="frontmatter" id="frontmatter" class="textarea" role="textbox"></textarea></div>
    </div>

    <h3>后文档模板</h3>
    <div class="textbox-container">
        <label for="backmatter">在此输入应出现在输出文件底部的文本。</label> <br />
        <div class="input-sizer"><textarea name="backmatter" id="backmatter" class="textarea" role="textbox"></textarea></div>
    </div>

    <div class="checkbox-container">
        <input name="includeTemplate" id="includeTemplate" type="checkbox" />
        <label for="includeTemplate">在剪藏文本中附加前后模板</label>
    </div>

    <hr>

    <div id="otherOptions">
        <h2>其他选项</h2>

        <div class="checkbox-container" id="contextMenus-container">
            <input name="contextMenus" id="contextMenus" type="checkbox" />
            <label for="contextMenus">启用右键菜单</label>
        </div>

        <br />

        <div class="checkbox-container" id="obsidian-container">
            <h3>Obsidian 集成</h3>
            <p>
                要与 Obsidian 集成，您需要安装并启用名为 <code>Advanced Obsidian URI</code> 的社区插件。该插件帮助我们绕过 URL 中的字符限制。因为它使用剪贴板作为创建新文件的源。
更多信息：  <a href="https://vinzent03.github.io/obsidian-advanced-uri/">Obsidian Advanced URI</a><br/>
            </p>
            <input name="obsidianIntegration" id="obsidianIntegration" type="checkbox" />
            <label for="obsidianIntegration">启用 Obsidian 集成</label>
        </div>

        <br />

        <div class="textbox-container" id="obsidianVault">
            <label for="obsidianVault">Obsidian 仓库名称： </label>
            <input type="text" name="obsidianVault" role="textbox" placeholder="如果为空，将使用主仓库。请指定它。" />
            <label for="obsidianFolder">Obsidian 文件夹名称： </label>
            <input type="text" name="obsidianFolder" role="textbox" placeholder="输入文件夹名称，例如：Clippers"/>
        </div>

        <br />

        <div class="radio-container" id="downloadMode">
            <h3>下载模式</h3>
            <p>
                用于下载 Markdown 文件的方法。如果您在使用下载 API 时遇到问题，请设置为“内容链接”
                （有时可能与其他下载扩展发生冲突，导致随机生成的文件名和其他症状）。<br/>
            </p>
            <p><strong>注意：</strong>“内容链接”模式会禁用某些功能，如下载图片或在文件名中使用子文件夹。</p>
            <input type="radio" name="downloadMode" id="downloadsApi" value="downloadsApi" />
            <label for="downloadsApi">下载 API（推荐）</label>
            <input type="radio" name="downloadMode" id="contentLink" value="contentLink" />
            <label for="contentLink">内容链接</label>
            <!-- <input type="radio" name="downloadMode" id="obsidianUri" value="obsidianUri" />
            <label for="obsidianUri">Obsidian URI (obsidian://new)</label> -->
        </div>
        <!-- <div id="obsidianUriGroup">
            <div class="textbox-container" id="obsidianVault">
                <label for="obsidianVault">Obsidian vault name: </label>
                <input type="text" name="obsidianVault" role="textbox" />
            </div>
            <div class="radio-container" id="obsidianPathType">
                <h3>Obsidian Path Type</h3>
                <input type="radio" name="obsidianPathType" id="name" value="name" />
                <label for="name"><span>Relative to default note folder</span>
                </label>
                <input type="radio" name="obsidianPathType" id="file" value="file" />
                <label for="file"><span>Relative to vault root</span>
                    <small>Requires Obsidian 0.11.1 or higher</small>
                </label>
            </div>
        </div> -->
        <div id="downloadModeGroup">
            <div class="checkbox-container" id="saveAs-container">
                <input name="saveAs" id="saveAs" type="checkbox" />
                <label for="saveAs">始终显示“另存为”对话框（无论浏览器设置如何）</label>
            </div>

            <br />

            <div class="checkbox-container" id="downloadImages-container">
                <input name="downloadImages" id="downloadImages" type="checkbox" />
                <label for="downloadImages">与 Markdown 文件一起下载图片</label>
            </div>

            <div class="textbox-container" id="imagePrefix">
                <label for="imagePrefix">图片文件名前缀模板： </label>
                <input type="text" name="imagePrefix" role="textbox" />
            </div>
        </div>
    </div>

    <hr>

    <h2>Markdown 转换选项</h2>

    <div class="radio-container" id="headingStyle">
        <h3>标题样式</h3>
        <input type="radio" name="headingStyle" id="setext" value="setext" />
        <label for="setext"><span>Setext 样式标题</span>
            <pre>All About Dogs
==============</pre>
        </label>
        <input type="radio" name="headingStyle" id="atx" value="atx" />
        <label for="atx"><span>Atx 样式标题</span>
            <pre># All About Dogs</pre>
        </label>
    </div>

    <div class="radio-container" id="hr">
        <h3>水平线样式</h3>
        <input type="radio" name="hr" id="***" value="***" />
        <label for="***"><code>***</code></label>
        <input type="radio" name="hr" id="---" value="---" />
        <label for="---"><code>---</code></label>
        <input type="radio" name="hr" id="___" value="___" />
        <label for="___"><code>___</code></label>
    </div>

    <div class="radio-container" id="bulletListMarker">
        <h3>项目符号标记</h3>
        <input type="radio" name="bulletListMarker" id="*" value="*" />
        <label for="*"><code>*</code></label>
        <input type="radio" name="bulletListMarker" id="-" value="-" />
        <label for="-"><code>-</code></label>
        <input type="radio" name="bulletListMarker" id="+" value="+" />
        <label for="+"><code>+</code></label>
    </div>

    <div class="radio-container" id="codeBlockStyle">
        <h3>代码块样式</h3>
        <input type="radio" name="codeBlockStyle" id="indented" value="indented" />
        <label for="indented">缩进式
            <pre>····const helloWorld = () => {
········console.log("Hello World");
····}</pre>
        </label>
        <input type="radio" name="codeBlockStyle" id="fenced" value="fenced" />
        <label for="fenced">围栏式
            <pre>```
const helloWorld = () => {
····console.log("Hello World");
}
```</pre>
        </label>
    </div>

    <div class="checkbox-container" id="preserveCodeFormatting-container">
        <input name="preserveCodeFormatting" id="preserveCodeFormatting" type="checkbox" />
        <label for="preserveCodeFormatting">保留代码块 HTML 格式
          <p><small>
            启用时，保留代码块内的原始 HTML 格式。
            这对于保持精确的视觉格式很有用，但可能使
            Markdown 更难阅读和在其他工具中使用。
            禁用时（默认），生成清洁的代码块。
          </small></p>
        </label>
      </div>

    <div class="radio-container" id="fence">
        <h3>代码块围栏</h3>
        <input type="radio" name="fence" id="```" value="```" />
        <label for="```"><code>```</code></label>
        <input type="radio" name="fence" id="~~~" value="~~~" />
        <label for="~~~"><code>~~~</code></label>
    </div>

    <div class="radio-container" id="emDelimiter">
        <h3>强调（斜体）分隔符</h3>
        <input type="radio" name="emDelimiter" id="em_" value="_" />
        <label for="em_"><code>_italics_</code></label>
        <input type="radio" name="emDelimiter" id="em*" value="*" />
        <label for="em*"><code>*italics*</code></label>
        <input type="radio" name="emDelimiter" id="em__" value="__" />
        <label for="em__"><code>__italics__</code> <strong>(Non-standard. Roam specific.)</strong></label>
    </div>

    <div class="radio-container" id="strongDelimiter">
        <h3>加粗（粗体）分隔符</h3>
        <input type="radio" name="strongDelimiter" id="**" value="**" />
        <label for="**"><code>**bold**</code></label>
        <input type="radio" name="strongDelimiter" id="__" value="__" />
        <label for="__"><code>__bold__</code></label>
    </div>

    <div class="radio-container" id="linkStyle">
        <h3>链接样式</h3>
        <input type="radio" name="linkStyle" id="inlined" value="inlined" />
        <label for="inlined">内联式
            <pre>[Google](http://google.com)</pre>
        </label>
        <input type="radio" name="linkStyle" id="referenced" value="referenced" />
        <label for="referenced">引用式
            <pre>[Google]

[Google]: http://google.com</pre>
        </label>
        <input type="radio" name="linkStyle" id="stripLinks" value="stripLinks" />
        <label for="stripLinks">删除链接
            <pre>Google</pre>
        </label>
    </div>

    <div class="radio-container" id="linkReferenceStyle">
        <h3>链接引用样式</h3>
        <input type="radio" name="linkReferenceStyle" id="full" value="full"  />
        <label for="full">完整式
            <pre>[Google][1]

[1]: http://google.com</pre>
        </label>
        <input type="radio" name="linkReferenceStyle" id="collapsed" value="collapsed" />
        <label for="collapsed">折叠式
            <pre>[Google][]

[Google]: http://google.com</pre>
        </label>
        <input type="radio" name="linkReferenceStyle" id="shortcut" value="shortcut" />
        <label for="shortcut">快捷式
            <pre>[Google]

[Google]: http://google.com</pre>
        </label>
    </div>
    
    <div class="radio-container" id="imageOptions">
        <h3>图片样式</h3>
        <input type="radio" name="imageStyle" id="originalSource" value="originalSource" />
        <label for="originalSource">原始源
            <pre>![](http://example.com/img/image.jpg)</pre>
        </label>
        <input type="radio" name="imageStyle" id="noImage" value="noImage" />
        <label for="noImage">删除图片
            <pre> &nbsp; &nbsp; &nbsp; </pre>
        </label>
        <p><strong>注意：</strong>以下选项仅在启用下载图片时适用。</p>
        <input type="radio" name="imageStyle" id="markdown" value="markdown" />
        <label for="markdown">纯 Markdown
            <pre>![](folder/image.jpg)</pre>
        </label>
        <input type="radio" name="imageStyle" id="base64" value="base64" />
        <label for="base64">Base64 编码
            <pre>![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==)</pre>
        </label>
        <input type="radio" name="imageStyle" id="obsidian" value="obsidian" />
        <label for="obsidian">Obsidian 内部嵌入
            <pre>![[folder/image.jpg]]</pre>
        </label>
        <input type="radio" name="imageStyle" id="obsidian-nofolder" value="obsidian-nofolder" />
        <label for="obsidian-nofolder">Obsidian 内部嵌入（不包含文件夹前缀）
            <pre>![[image.jpg]]</pre>
        </label>
    </div>

    <div class="radio-container" id="imageRefOptions">
        <h3>图片引用样式</h3>
        <p><strong>注意：</strong>以下选项仅在图片样式为 markdown（非 Obsidian 样式）时适用。</p>
        <input type="radio" name="imageRefStyle" id="img-inlined" value="inlined" />
        <label for="img-inlined">内联式
            <pre>![](address/of/image.jpg)</pre>
        </label>
        <input type="radio" name="imageRefStyle" id="img-referenced" value="referenced" />
        <label for="img-referenced">引用式
            <pre> ![][fig1]

[fig1]: address/of/image.jpg</pre>
        </label>
    </div>

    <div class="checkbox-container" id="turndownEscape-container">
        <input name="turndownEscape" id="turndownEscape" type="checkbox" />
        <label for="turndownEscape">转义 Markdown 字符
            <p><small>
                默认情况下，使用反斜杠（<code>\</code>）来转义 
                HTML 输入中的 Markdown 字符。这确保这些
                字符不会被解释为 Markdown。例如，
                <code>&lt;h1&gt;1. Hello world&lt;/h1&gt;</code> 的内容
                需要转义为 <code>1\. Hello world</code>，否则
                它将被解释为列表项而不是标题。
                <br />禁用此选项会禁用此转义。
            </small></p>
        </label>
    </div>

    <hr>

    <h2>表格格式化选项</h2>

    <div class="checkbox-container" id="table-options">
        <h3>表格格式化</h3>
        
        <input name="tableFormatting.stripLinks" id="table-stripLinks" type="checkbox" />
        <label for="table-stripLinks">
            从表格中删除链接
            <p><small>
                从表格中删除所有链接，仅保留文本内容。
                创建更清洁、更可读的表格。
            </small></p>
        </label>
        
        <input name="tableFormatting.stripFormatting" id="table-stripFormatting" type="checkbox" />
        <label for="table-stripFormatting">
            删除格式（粗体、斜体等）
            <p><small>
                从表格单元格中删除粗体和斜体等格式。
                结果为纯文本表格。
            </small></p>
        </label>
        
        <input name="tableFormatting.prettyPrint" id="table-prettyPrint" type="checkbox" checked />
        <label for="table-prettyPrint">
            美化打印表格
            <p><small>
                使用适当的间距和对齐格式化表格。
                使表格在 markdown 中更具可读性。
            </small></p>
        </label>
        
        <input name="tableFormatting.centerText" id="table-centerText" type="checkbox" checked />
        <label for="table-centerText">
            居中对齐列文本
            <p><small>
                在表格列中居中对齐文本。
                创建更精致的外观。
            </small></p>
        </label>
    </div>
    
    <h2>导入 / 导出</h2>

    <div class="button-container">
        <label for="import">从之前的备份导入</label> <br />
        <div class="input-sizer"><button name="import" id="import"> 选择文件...<input type="file" name="import-file" id="import-file" /></button> </div>

        <label for="export">导出当前选项</label> <br />
        <div class="input-sizer"><button name="export" id="export">导出</button></div>
    </div>

                <div id="spinner" style="display: none;"></div>
                <div id="status" class="status"></div>
            </div>
        </div>
    </div>

    <script src="../browser-polyfill.min.js"></script>
    <script src="../shared/default-options.js"></script>
    <script src="../shared/context-menus.js"></script>
    <script src="options.js"></script>
</body>

</html>
